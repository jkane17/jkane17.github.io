<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>An Introduction to Compression in Q/KDB+ - Q/KDB Blog</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/custom-highlight-00a73c7c.css">
        <link rel="stylesheet" href="theme/navigation-ccf6f99d.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-fea86c29.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-8faff5ba.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Q/KDB Blog</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="an-introduction-to-compression-in-qkdb"><a class="header" href="#an-introduction-to-compression-in-qkdb">An Introduction to Compression in Q/KDB+</a></h1>
<p><img src="./images/compression.png" title="Cover Image" alt="Cover Image"></p>
<p>In the realm of computer science, compression refers to the process of reducing the size of a data object, such as a file, to save disk space and accelerate data transfer. In Q/KDB+, compression is both efficient and seamless: compressed data can be written to and read from disk without any additional effort on the user’s part. The language’s built-in methods for file handling automatically support both compressed and uncompressed formats, ensuring a smooth and transparent user experience.</p>
<p>This blog explores the fundamentals of compression in Q/KDB+, focusing on how to write and read compressed files. We will examine how compression operates for various data structures, such as tables and columns, and discuss how to apply compression settings effectively to optimise storage.</p>
<h2 id="writing-compressed-files"><a class="header" href="#writing-compressed-files">Writing Compressed Files</a></h2>
<p>In Q/KDB+, there are two main methods for writing compressed files:</p>
<ol>
<li>
<p><a href="#method-1-write-uncompressed-compress-later">Method 1</a>: Write data to disk in an uncompressed form, then compress it later on disk.</p>
</li>
<li>
<p><a href="#method-2-write-compressed-data-directly">Method 2</a>: Write data directly to disk in compressed form.</p>
</li>
</ol>
<p><strong>Method 1</strong> is beneficial when you want to bypass the overhead of compression during data saving, allowing it to be deferred until later when resources are less constrained. However, in most cases, it’s more efficient to compress the data and save it in a single step (<strong>Method 2</strong>).</p>
<h3 id="method-1-write-uncompressed-compress-later"><a class="header" href="#method-1-write-uncompressed-compress-later">Method 1: Write Uncompressed, Compress Later</a></h3>
<p>To write data to disk in an uncompressed form, use the <code>set</code> keyword:</p>
<pre><code class="language-q">q)`:/path/to/file set data
</code></pre>
<p>Once saved, you can compress the file on disk using the <code>set</code> keyword again, but this time specifying compression parameters:</p>
<pre><code class="language-q">q)(targetFile;blockSize;algorithm;level) set srcFile
</code></pre>
<p>Where:</p>
<ul>
<li><code>targetFile</code> - The path to the compressed file.</li>
<li><code>blockSize</code> - The <a href="#logical-block-size">logical block size</a>, determining how much data to compress at a time.</li>
<li><code>algorithm</code> - The <a href="#compression-algorithms">compression algorithm</a> to use.</li>
<li><code>level</code> - The <a href="#compression-algorithms">compression (zip) level</a>.</li>
<li><code>srcFile</code> - The path to the uncompressed source file.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Performance depends heavily on the number of disk seeks. Placing the source and target files on separate physical disks can reduce seek time and improve performance.</p>
</blockquote>
<p><strong>Example</strong></p>
<p>Let’s create a list of random data:</p>
<pre><code class="language-q">q)show data:1000?100 // List of 1000 random longs between 0 and 100
7 62 89 15 9 37 23..
</code></pre>
<p>Write the data to disk in uncompressed form:</p>
<pre><code class="language-q">q)`:data set data
`:data
</code></pre>
<p>Check the file’s size on disk:</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     12:39           8016 data
</code></pre>
<p>Now, compress the uncompressed file:</p>
<pre><code class="language-q">// Compress using the q IPC compression algorithm
q)(`:compressedData1;16;1;0) set `:./data
`:compressedData1
</code></pre>
<p>Verify the compressed file size:</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     12:51           2297 compressedData1
-a---l        02/10/2024     12:39           8016 data
</code></pre>
<p>As shown, the compressed file is much smaller than the uncompressed version.</p>
<h3 id="method-2-write-compressed-data-directly"><a class="header" href="#method-2-write-compressed-data-directly">Method 2: Write Compressed Data Directly</a></h3>
<p>To compress and save data directly to disk in one step, use the <code>set</code> keyword with compression parameters:</p>
<pre><code class="language-q">q)(targetFile;blockSize;algorithm;level) set data
</code></pre>
<p>Where <code>data</code> is any Q object you wish to save in a compressed format.</p>
<p><strong>Example</strong></p>
<p>Using the same random data from the previous example, compress and save it directly:</p>
<pre><code class="language-q">q)(`:compressedData2;16;1;0) set data
`:compressedData2
</code></pre>
<p>Verify the compressed file size:</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     12:51           2297 compressedData1
-a---l        02/10/2024     13:05           2297 compressedData2
-a---l        02/10/2024     12:49           8016 data
</code></pre>
<p>The compressed file <code>compressedData2</code> is the same size as <code>compressedData1</code>, showing that the compression methods produce an equivalent result.</p>
<h3 id="appending-to-compressed-data"><a class="header" href="#appending-to-compressed-data">Appending to Compressed Data</a></h3>
<p>It is also possible to append data to a compressed file using the <code>upsert</code> keyword. This allows you to add more data without needing to decompress the existing file:</p>
<pre><code class="language-q">q)`:compressedData2 upsert 1000?100 // Append another 1000 random longs
`:compressedData2
</code></pre>
<p>Check the file’s size after appending:</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     12:51           2297 compressedData1
-a---l        02/10/2024     13:15           4403 compressedData2
-a---l        02/10/2024     12:49           8016 data
</code></pre>
<p>We can see that the size of <code>compressedData2</code> has increased after appending more data.</p>
<h2 id="reading-compressed-files"><a class="header" href="#reading-compressed-files">Reading Compressed Files</a></h2>
<p>Reading data from a compressed file in Q/KDB+ is identical to reading from an uncompressed file, both done using the <code>get</code> keyword:</p>
<pre><code class="language-q">q)get `:/path/to/file
</code></pre>
<p><strong>Example</strong></p>
<p>Let’s read the files created in the previous examples:</p>
<pre><code class="language-q">q)get `:data
7 62 89 15 9 37 23..
q)get `:compressedData1
7 62 89 15 9 37 23..
</code></pre>
<p>As shown, from the user’s perspective, reading data is the same whether it’s stored in compressed or uncompressed form.</p>
<p>However, there is a performance difference when reading compressed vs. uncompressed data:</p>
<pre><code class="language-q">// Create large uncompressed and compressed files
q)bigData:100000000?100
q)`:bigData set bigData
`:bigData
q)(`:bigDataCompressed;16;1;0) set bigData
`:bigDataCompressed

// Time and space statistics
q)\ts get `:bigData
0 560
q)\ts get `:bigDataCompressed
36 459472
</code></pre>
<p>In this case, reading the compressed file takes slightly longer and consumes significantly more memory than reading the uncompressed version.</p>
<h2 id="logical-block-size"><a class="header" href="#logical-block-size">Logical Block Size</a></h2>
<p>The logical block size (LBS) is a crucial parameter that dictates the amount of data compressed in each block. This size plays a significant role in both compression efficiency and performance during data access.</p>
<h3 id="impact-on-compression"><a class="header" href="#impact-on-compression">Impact on Compression</a></h3>
<p>A larger LBS allows for better identification of repeated values within the data, which can lead to a better compression ratio. By processing more data at once, the compressor has a greater chance of finding redundancies and achieving more effective compression.</p>
<p>However, a larger block size also influences the decompression process. If the LBS is set too high compared to the amount of data typically accessed during queries, it can lead to excessive and unnecessary decompression work. This inefficiency can slow down query performance as the system processes more data than needed at once.</p>
<h3 id="possible-values"><a class="header" href="#possible-values">Possible Values</a></h3>
<p>The LBS can be set to a power of two between 12 and 20. Here’s a table mapping each LBS value to its corresponding block size in bytes:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>LBS Value</th><th>Physical Size</th></tr>
</thead>
<tbody>
<tr><td>12</td><td>4 kB</td></tr>
<tr><td>13</td><td>8 kB</td></tr>
<tr><td>14</td><td>16 kB</td></tr>
<tr><td>15</td><td>32 kB</td></tr>
<tr><td>16</td><td>64 kB</td></tr>
<tr><td>17</td><td>128 kB</td></tr>
<tr><td>18</td><td>256 kB</td></tr>
<tr><td>19</td><td>512 kB</td></tr>
<tr><td>20</td><td>1 MB</td></tr>
</tbody>
</table>
</div>
<p>Attempting to set an LBS outside this range results in an error. For example:</p>
<pre><code class="language-q">q)(`:data;11;1;0) set data
'bad blockSize 2048 for data$
  [0]  (`:data;11;1;0) set data
                       ^

q)(`:data;21;1;0) set data
'bad blockSize 2097152 for data$
  [0]  (`:data;21;1;0) set data
                       ^
</code></pre>
<p>Choosing the appropriate LBS value can impact both compression efficiency and speed. Larger values can improve compression ratios by capturing more repeated data patterns but may also slow down compression.</p>
<h3 id="system-constraints"><a class="header" href="#system-constraints">System Constraints</a></h3>
<p>The minimum LBS is bound by the system’s allocation granularity. If the block size is smaller than this granularity, it could result in wasted space. Typical values for allocation granularity include:</p>
<ul>
<li>AMD64: 4 kB</li>
<li>SPARC: 8 kB</li>
<li>Windows: 64 kB (default)</li>
<li>Apple Silicon: 16 kB</li>
</ul>
<p>When selecting a LBS, it’s important to consider the minimum allocation granularity across all platforms that will access the files. Failing to do so may result in sub-optimal performance.</p>
<h2 id="compression-algorithms"><a class="header" href="#compression-algorithms">Compression Algorithms</a></h2>
<p>As of Q/KDB+ version 4.1, the following compression algorithms are available:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Number</th><th>Level</th></tr>
</thead>
<tbody>
<tr><td>none</td><td>0</td><td>0</td></tr>
<tr><td>q IPC</td><td>1</td><td>0</td></tr>
<tr><td>gzip</td><td>2</td><td>0 - 9</td></tr>
<tr><td>snappy</td><td>3</td><td>0</td></tr>
<tr><td>lz4hc</td><td>4</td><td>0 - 16</td></tr>
<tr><td>zstd</td><td>5</td><td>-7 - 22</td></tr>
</tbody>
</table>
</div>
<p>The <code>Number</code> column indicates the value to be supplied as the algorithm parameter during compression. The <code>Level</code> column denotes the range of possible compression levels for each algorithm.</p>
<p><strong>Example Usage</strong></p>
<p>You can specify the algorithms and levels as follows:</p>
<pre><code class="language-q">q)(16;1;0)  // Using q IPC compression algorithm with level 0
q)(16;2;6)  // Using gzip compression algorithm with level 6
q)(16;5;-2) // Using zstd compression algorithm with level -2
</code></pre>
<p>The q IPC algorithm is built into Q/KDB+ and is always available. In contrast, the other algorithms depend on external libraries, which must be installed on your system to function properly. For more information on meeting the requirements for each algorithm, see <a href="https://code.kx.com/q/kb/file-compression/#requirements">Requirements</a>.</p>
<p>If Q/KDB+ cannot access an algorithm, it will raise an error. For example:</p>
<pre><code class="language-q">q)(`:data;16;2;6) set data // Attempting to use gzip algorithm
'zlib libs required to compress data$. The specified module could not be found.
  [0]  (`:data;16;2;6) set data
                       ^
</code></pre>
<pre><code class="language-q">q)(`:data;16;3;0) set data // Attempting to use snappy algorithm
'snappy libs required to compress data$. The specified module could not be found.
  [0]  (`:data;16;3;0) set data
                       ^
</code></pre>
<h2 id="compression-defaults"><a class="header" href="#compression-defaults">Compression Defaults</a></h2>
<p>In Q/KDB+, we can set default compression parameters using <code>.z.zd</code>, allowing us to compress files without explicitly passing these parameters to <code>set</code> each time. This can simplify file writing operations when compression is needed consistently across multiple files.</p>
<p>By default, these compression parameters are not set:</p>
<pre><code class="language-q">q).z.zd
'.z.zd
  [0]  .z.zd
       ^
</code></pre>
<p>For example, in earlier cases, we saved a file (<code>data</code>) without compression. Now, let’s apply default compression settings:</p>
<pre><code class="language-q">q).z.zd:(16;1;0) // Set default values (blockSize, algorithm, zipLevel)
q)`:compressedData3 set data
</code></pre>
<p>This will compress the data and save it to a new file, <code>compressedData3</code>, without needing to specify compression parameters explicitly to <code>set</code>.</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     12:51           2297 compressedData1
-a---l        02/10/2024     13:15           4403 compressedData2
-a---l        02/10/2024     13:22           2297 compressedData3
-a---l        02/10/2024     12:49           8016 data
</code></pre>
<p>As shown, even though no explicit compression parameters were passed to <code>set</code>, the data was saved in compressed form in <code>compressedData3</code> using the default settings.</p>
<h3 id="removing-defaults"><a class="header" href="#removing-defaults">Removing Defaults</a></h3>
<p>You can reset or remove the compression defaults by either setting <code>.z.zd</code> values to zero or expunging the setting altogether:</p>
<pre><code class="language-q">q).z.zd:3#0 // Reset default compression settings to 0
</code></pre>
<p>or</p>
<pre><code class="language-q">q)\x .z.zd // Expunge .z.zd
</code></pre>
<p>After removing the defaults, the system reverts to not applying compression unless explicitly specified.</p>
<h3 id="handling-file-extensions"><a class="header" href="#handling-file-extensions">Handling File Extensions</a></h3>
<p>It’s important to note that files with extensions, such as <code>.txt</code>, will not be compressed by default, even if the compression defaults are set:</p>
<pre><code class="language-q">q).z.zd
'.z.zd
  [0]  .z.zd
       ^
q)`:data1.txt set data
`:data1.txt
q).z.zd:(16;1;0)
q)`:data2.txt set data
`:data2.txt
</code></pre>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     13:34           8016 data1.txt
-a---l        02/10/2024     13:34           8016 data2.txt
</code></pre>
<p>Both <code>data1.txt</code> and <code>data2.txt</code> are the same size because no compression was applied to <code>data2.txt</code>, even though defaults were set. Files with extensions remain uncompressed unless explicitly handled.</p>
<h2 id="compression-statistics"><a class="header" href="#compression-statistics">Compression Statistics</a></h2>
<p>Q/KDB+ provides an internal function, <code>-21!</code>, to view compression statistics for files stored on disk. This allows you to inspect how effectively a file has been compressed. The syntax is as follows:</p>
<pre><code class="language-q">q)-21!`:/path/to/file
</code></pre>
<p>For uncompressed files, this command returns nothing:</p>
<pre><code class="language-q">q)-21!`:data
q)
</code></pre>
<p>However, for compressed files, it returns a dictionary with detailed statistics:</p>
<pre><code class="language-q">q)-21!`:compressedData1
compressedLength  | 2297
uncompressedLength| 8016
algorithm         | 1i
logicalBlockSize  | 16i
zipLevel          | 0i

q)-21!`:compressedData2
compressedLength  | 4403
uncompressedLength| 16016
algorithm         | 1i
logicalBlockSize  | 16i
zipLevel          | 0i
</code></pre>
<p>The statistics include:</p>
<ul>
<li><code>compressedLength</code> - Size of the file after compression.</li>
<li><code>uncompressedLength</code> - Original size of the data before compression.</li>
<li><code>algorithm</code> - The algorithm used for compression.</li>
<li><code>logicalBlockSize</code> - The size of each logical block used during compression.</li>
<li><code>zipLevel</code> - The level of compression applied.</li>
</ul>
<p>We can easily calculate the compression factor (the ratio of uncompressed size to compressed size) from this data:</p>
<pre><code class="language-q">q)stats:-21!`:compressedData1
q)(%). stats`uncompressedLength`compressedLength
3.489769
</code></pre>
<p>In this example, the compression factor is approximately 3.49, meaning the file size has been reduced to about 1/3.49 or 29% of its original size.</p>
<h2 id="compressing-and-decompressing-tables"><a class="header" href="#compressing-and-decompressing-tables">Compressing and Decompressing Tables</a></h2>
<p>In Q/KDB+, tables are a common data structure, and the system offers robust methods for compressing and decompressing tables, whether they are flat or splayed. Below, we outline key strategies for efficiently handling table compression.</p>
<h3 id="flat-tables"><a class="header" href="#flat-tables">Flat Tables</a></h3>
<p>Flat tables are stored in a single file, so compression and decompression work the same way as with simpler lists or vectors. To save a flat table in compressed form, you simply pass the desired parameters to <code>set</code>:</p>
<pre><code class="language-q">q)(targetFile;blockSize;algorithm;level) set table
</code></pre>
<p><strong>Example</strong></p>
<p>Let’s create a simple flat table containing symbols, quantities, and prices (<code>sym</code>, <code>qty</code>, and <code>px</code>):</p>
<pre><code class="language-q">q)n:10000 // Number of rows
q)show t:([] sym:n?`3; qty:n?100; px:n?100f)
sym qty px
----------------
cbl 6   39.27524
afi 67  51.70911
pga 95  51.59796
..
</code></pre>
<p>Now we save it both uncompressed and compressed:</p>
<pre><code class="language-q">q)`:table set t // Uncompressed
`:table
q)(`:tableCompressed;16;1;0) set t // Compressed
`:tableCompressed
</code></pre>
<p>We can then compare the file sizes:</p>
<pre><code class="language-powershell">C:\&gt; ls

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        02/10/2024     16:54         200046 table
-a---l        02/10/2024     16:54         159152 tableCompressed
</code></pre>
<p>As expected, the compressed file is smaller.</p>
<h4 id="reading-compressed-tables"><a class="header" href="#reading-compressed-tables">Reading Compressed Tables</a></h4>
<p>Reading tables back into memory is seamless with the <code>get</code> function, whether they are compressed or not:</p>
<pre><code class="language-q">q)get`:table
sym qty px
----------------
cbl 6   39.27524
afi 67  51.70911
pga 95  51.59796
..

q)get`:tableCompressed
sym qty px
----------------
cbl 6   39.27524
afi 67  51.70911
pga 95  51.59796
..
</code></pre>
<p>Both commands will return the same table, but with different performance and memory usage characteristics.</p>
<h3 id="splayed-tables"><a class="header" href="#splayed-tables">Splayed Tables</a></h3>
<p>For large tables, it’s often useful to “splay” them, meaning each column is stored separately on disk. Compression can still be applied, but each column is handled individually.</p>
<h4 id="creating-an-uncompressed-splayed-table"><a class="header" href="#creating-an-uncompressed-splayed-table">Creating an Uncompressed Splayed Table</a></h4>
<p>We can splay the table <code>t</code> to a directory:</p>
<pre><code class="language-q">q)`:uncompressed/t/ set .Q.en[`:uncompressed;t]
`:uncompressed/t/
</code></pre>
<p>This will store each column as a separate file inside the <code>t</code> directory.</p>
<pre><code class="language-powershell">C:\&gt; ls .\uncompressed\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
dar--l        03/10/2024     11:59                t
-a---l        03/10/2024     11:59          14924 sym

C:\&gt; ls .\uncompressed\t\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        03/10/2024     11:59             19 .d
-a---l        03/10/2024     11:59          80016 px
-a---l        03/10/2024     11:59          80016 qty
-a---l        03/10/2024     11:59          84096 sym
</code></pre>
<h4 id="creating-a-compressed-splayed-table"><a class="header" href="#creating-a-compressed-splayed-table">Creating a Compressed Splayed Table</a></h4>
<p>To compress a splayed table, we pass the same compression parameters used earlier:</p>
<pre><code class="language-q">q)(`:compressed/t/;16;1;0) set .Q.en[`:compressed;t]
`:compressed/t/
</code></pre>
<p>After saving the compressed splayed table, we can again compare file sizes:</p>
<pre><code class="language-powershell">C:\&gt; ls .\compressed\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
dar--l        03/10/2024     12:02                t
-a---l        03/10/2024     12:02          14924 sym

C:\&gt; ls .\compressed\t\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        03/10/2024     12:02             75 .d
-a---l        03/10/2024     12:02          80080 px
-a---l        03/10/2024     12:02          21559 qty
-a---l        03/10/2024     12:02          33397 sym
</code></pre>
<h4 id="column-files"><a class="header" href="#column-files">Column Files</a></h4>
<p>The compression significantly reduces the size of the <code>qty</code> and <code>sym</code> column files, but interestingly, the <code>px</code> file increases in size after compression. (The <code>.d</code> file, which holds the column order, also grows slightly but remains small in comparison.) This highlights a key point: not all columns compress well, and it would be ideal to apply compression selectively based on the characteristics of each column.</p>
<h4 id="column-by-column-compression"><a class="header" href="#column-by-column-compression">Column-by-Column Compression</a></h4>
<p>Since each column in a splayed table is stored as a separate file, Q/KDB+ allows for column-by-column compression. Different compression algorithms, levels, and block sizes can be assigned to each column individually. This flexibility is useful because certain columns, depending on factors such as data type, value repetition, and overall structure, may respond better to specific compression strategies. By selectively applying compression, you can optimise performance and storage efficiency without being limited to a single compression method across the entire table.</p>
<p>To apply column-specific compression to a splayed table, use the following syntax:</p>
<pre><code class="language-q">q)(dir;dic) set t
</code></pre>
<p>Where</p>
<ul>
<li><code>dir</code> - The path to the splayed table directory.</li>
<li><code>dic</code> - A dictionary that maps each column to its respective compression parameters.</li>
<li><code>t</code> - The table to be splayed.</li>
</ul>
<p>In the earlier example, the <code>px</code> column didn’t compress effectively, so we’ll exclude it from compression:</p>
<pre><code class="language-q">q)show dic:`px`qty`sym!(0 0 0;16 1 0;16 1 0)
px | 0  0 0   // No compression on px
qty| 16 1 0
sym| 16 1 0
q)(`:compressedCByC/t/;dic) set .Q.en[`:compressedCByC;t]
`:compressedCByC/t/
</code></pre>
<p>This results in:</p>
<pre><code class="language-powershell">C:\&gt; ls .\compressedCByC\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
dar--l        03/10/2024     12:46                t
-a---l        03/10/2024     12:46          14924 sym

C:\&gt; ls .\compressedCByC\t\

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        03/10/2024     12:46             19 .d
-a---l        03/10/2024     12:46          80016 px
-a---l        03/10/2024     12:46          21559 qty
-a---l        03/10/2024     12:46          33397 sym
</code></pre>
<p>The <code>px</code> column file remains the same size as in the uncompressed table. We can confirm that no compression was applied to <code>px</code>, while the <code>qty</code> and <code>sym</code> columns were successfully compressed using q IPC compression:</p>
<pre><code class="language-q">q)-21!`:compressedCByC/t/px

q)-21!`:compressedCByC/t/qty
compressedLength  | 21559
uncompressedLength| 80016
algorithm         | 1i
logicalBlockSize  | 16i
zipLevel          | 0i

q)-21!`:compressedCByC/t/sym
compressedLength  | 33397
uncompressedLength| 84096
algorithm         | 1i
logicalBlockSize  | 16i
zipLevel          | 0i
</code></pre>
<p><code>dic</code> can also include a null key to define default compression parameters for any columns not explicitly listed in the dictionary. This allows for flexible control over compression behaviour across multiple columns. For example:</p>
<pre><code class="language-q">q)show dic:``qty`sym!(0 0 0;16 1 0;16 1 0)
   | 0  0 0   // Default: No compression
qty| 16 1 0
sym| 16 1 0
</code></pre>
<p>In this case, columns not specified in the dictionary, like <code>px</code>, would automatically use the default compression (<code>0 0 0</code>), which applies no compression. This offers a concise way to manage compression policies while avoiding the need to specify every column individually.</p>
<h4 id="compress-a-splayed-table-on-disk"><a class="header" href="#compress-a-splayed-table-on-disk">Compress a Splayed Table on Disk</a></h4>
<p>If you already have a splayed table saved on disk that is too large to fit into memory, you can pass the splayed table’s path directly to <code>set</code>, allowing compression without needing to load the data in memory. Here’s an example of applying compression to the <code>uncompressed</code> splayed directory we created earlier:</p>
<pre><code class="language-q">q)(`:uncompressed/t/;dic) set `:uncompressed/t
`:uncompressed/t/
</code></pre>
<p>Now let’s check the files:</p>
<pre><code class="language-powershell">C:\&gt; ls .\uncompressed\t

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----        03/10/2024     13:27             19 .d
-a----        03/10/2024     13:27          80016 px
-a---l        03/10/2024     13:27          21559 qty
-a---l        03/10/2024     13:27          33397 sym
</code></pre>
<p>You can see that the <code>qty</code> and <code>sym</code> files have been successfully compressed on disk.</p>
<h4 id="the-sym-file"><a class="header" href="#the-sym-file">The Sym File</a></h4>
<p>The file size of the <code>sym</code> file remains unchanged between the compressed and uncompressed versions. Let’s inspect the compression statistics to confirm:</p>
<pre><code class="language-q">q)-21!`:compressed/sym
q)
</code></pre>
<p>Since no output is returned, it indicates that the <code>sym</code> file was not compressed.</p>
<p>It’s important to note that the <code>sym</code> file should not be compressed for two key reasons:</p>
<ol>
<li><strong>Unique values</strong>: The <code>sym</code> file contains only distinct values (symbols), which typically doesn’t compress well since there’s no repetition in the data.</li>
<li><strong>Appending restrictions</strong>: Once compressed, the <code>sym</code> file becomes non-appendable, as illustrated below.</li>
</ol>
<pre><code class="language-q">q)(`:bad/t/;16;1;0) set .Q.en[`:bad;t] // Create a new splay
`:bad/t/
q)(`:bad/sym;16;1;0) set `:bad/sym     // Manually compress the sym file
`:bad/sym
q)-21!`:bad/sym                        // Check the sym file compression stats
compressedLength  | 14980
uncompressedLength| 14924
algorithm         | 1i
logicalBlockSize  | 16i
zipLevel          | 0i
</code></pre>
<p>Though the file is compressed, <code>compressedLength</code> is actually greater than <code>uncompressedLength</code>, confirming poor compression efficiency.</p>
<p>Furthermore, trying to append data to a compressed <code>sym</code> file results in an error:</p>
<pre><code class="language-q">q)(`:bad/t2/;16;1;0) set .Q.en[`:bad;([] sym:`a`b`c; val:1 2 3)] 
'no append to zipped enums: bad/sym
  [0]  (`:bad/t2/;16;1;0) set .Q.en[`:bad;([] sym:`a`b`c; val:1 2 3)]
                          ^
</code></pre>
<p>This shows that once a <code>sym</code> file is compressed, Q/KDB+ raises an error when attempting to append new symbol data. Compression offers little benefit for <code>sym</code> files and can restrict common operations, making it unsuitable for this specific file.</p>
<h4 id="appending-to-a-compressed-splayed-table"><a class="header" href="#appending-to-a-compressed-splayed-table">Appending to a Compressed Splayed Table</a></h4>
<p>Appending new data to compressed splayed tables works exactly the same as for uncompressed ones. Here’s an example of appending a few rows to the <code>compressedCByC</code> splayed table:</p>
<pre><code class="language-q">q)`:compressedCByC/t upsert .Q.en[`:.;] ([] sym:`a`b`c; qty:1 2 3; px:1 2 3f)
`:compressedCByC/t
q)\l compressedCByC // Load the splayed database
q)-5#t // Inspect the last 5 rows
sym qty px
----------------
ngh 89  99.18507
jic 28  23.3976
a   1   1
b   2   2
c   3   3
</code></pre>
<p>Checking the directory confirms that the file sizes have slightly increased due to the addition of the new rows:</p>
<pre><code class="language-powershell">C:\&gt; ls .\compressedCByC\t

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---l        04/10/2024     16:00             19 .d
-a---l        04/10/2024     16:00          80040 px
-a---l        04/10/2024     16:00          21565 qty
-a---l        04/10/2024     16:00          33407 sym
</code></pre>
<p>As expected, the <code>qty</code>, <code>sym</code>, and <code>px</code> files have grown, reflecting the addition of new data.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>In this blog, we explored the fundamentals of compression in Q/KDB+, focusing on how to write and read compressed files effectively. We discussed the significance of compression in optimising storage and enhancing data management, particularly regarding tables and columns. We also examined the implications of logical block size, emphasizing the trade-offs between compression efficiency and performance during data access.</p>
<p>Understanding these concepts is vital for effectively managing data in Q/KDB+. By applying the right compression techniques, you can maximise storage efficiency while minimising the performance overhead during query operations.</p>
<p>Check out <a href="./compression_perf.html">part two</a> of this series on compression in Q/KDB+, where we will explore algorithm performance, analyse the efficiency of querying compressed data, benchmark various compression methods, and discuss practical strategies to optimise your compression choices.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="compression_perf.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="command_line_args.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="compression_perf.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="command_line_args.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-2c2089fd.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/navigation-8d154390.js"></script>



    </div>
    </body>
</html>
